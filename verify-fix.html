<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡ä¿®å¤éªŒè¯ - Unsplashè®¿é—®æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2rem;
            text-align: center;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
            text-align: center;
        }
        .status-bar {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }
        .status-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            flex: 1;
            min-width: 150px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .status-item .label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
        }
        .status-item .value {
            font-size: 2rem;
            font-weight: bold;
        }
        .status-item .value.success {
            color: #4caf50;
        }
        .status-item .value.error {
            color: #f44336;
        }
        .status-item .value.pending {
            color: #ff9800;
        }
        .test-section {
            margin: 30px 0;
        }
        .test-section h2 {
            color: #2196f3;
            margin-bottom: 20px;
            font-size: 1.4rem;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .image-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .image-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }
        .image-card.success {
            border-color: #4caf50;
            background: #f1f8f4;
        }
        .image-card.error {
            border-color: #f44336;
            background: #fff5f5;
        }
        .image-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
            background: #e0e0e0;
        }
        .image-card .title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 0.95rem;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .image-card .status {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-top: 8px;
        }
        .image-card .status.success {
            background: #d4edda;
            color: #155724;
        }
        .image-card .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .image-card .status.loading {
            background: #d1ecf1;
            color: #0c5460;
        }
        .image-card .info {
            font-size: 0.85rem;
            color: #666;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #dee2e6;
        }
        .alert {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        .alert.success {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        .alert.error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        .alert.warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        .alert .icon {
            font-size: 1.5rem;
        }
        .alert .content h3 {
            margin-bottom: 10px;
            color: #333;
        }
        .alert .content p {
            color: #666;
            line-height: 1.6;
        }
        button {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            margin: 10px 5px;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        button.secondary {
            background: #6c757d;
        }
        button.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        .actions {
            text-align: center;
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
        }
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å›¾ç‰‡ä¿®å¤éªŒè¯æµ‹è¯•</h1>
        <p class="subtitle">æµ‹è¯•Unsplashè®¿é—®å’Œå¤‡ç”¨å›¾ç‰‡æœºåˆ¶</p>

        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
            <div class="status-item">
                <div class="label">æ€»å›¾ç‰‡æ•°</div>
                <div class="value pending" id="totalCount">11</div>
            </div>
            <div class="status-item">
                <div class="label">åŠ è½½æˆåŠŸ</div>
                <div class="value success" id="successCount">0</div>
            </div>
            <div class="status-item">
                <div class="label">ä½¿ç”¨å¤‡ç”¨</div>
                <div class="value error" id="fallbackCount">0</div>
            </div>
            <div class="status-item">
                <div class="label">æˆåŠŸç‡</div>
                <div class="value pending" id="successRate">0%</div>
            </div>
        </div>

        <!-- è¿›åº¦æ¡ -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- æµ‹è¯•ç»“æœæç¤º -->
        <div id="alertContainer"></div>

        <!-- Baratzaå’–å•¡ç ”ç£¨æœº - é‡ç‚¹æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ¯ é—®é¢˜å›¾ç‰‡æµ‹è¯•ï¼ˆBaratza Encore å’–å•¡ç ”ç£¨æœºï¼‰</h2>
            <div class="image-grid">
                <div class="image-card" id="card-baratza">
                    <img id="img-baratza" 
                         src="https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400&h=400&fit=crop&q=80&auto=format&fm=jpg" 
                         alt="Baratza Coffee Grinder"
                         onerror="handleImageError(this, 'baratza')">
                    <div class="title">Baratza Encore Conical Burr Grinder</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                    <div class="info">è¿™æ˜¯ä¹‹å‰æŠ¥é”™çš„å›¾ç‰‡</div>
                </div>
            </div>
        </div>

        <!-- æ‰€æœ‰äº§å“å›¾ç‰‡æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ“¦ å…¨éƒ¨äº§å“å›¾ç‰‡æµ‹è¯•ï¼ˆ11å¼ ï¼‰</h2>
            <div class="image-grid">
                <!-- 1. Patagonia -->
                <div class="image-card" id="card-1">
                    <img id="img-1" 
                         src="https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&h=400&fit=crop" 
                         alt="Patagonia Sweater"
                         onerror="handleImageError(this, '1')">
                    <div class="title">Patagonia Better Sweater</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 2. Vitamin C Serum -->
                <div class="image-card" id="card-2">
                    <img id="img-2" 
                         src="https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=400&h=400&fit=crop" 
                         alt="Vitamin C Serum"
                         onerror="handleImageError(this, '2')">
                    <div class="title">Vitamin C Serum</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 3. Face Cleanser -->
                <div class="image-card" id="card-3">
                    <img id="img-3" 
                         src="https://images.unsplash.com/photo-1556228852-80a49e41465c?w=400&h=400&fit=crop" 
                         alt="Face Cleanser"
                         onerror="handleImageError(this, '3')">
                    <div class="title">Youth to the People Cleanser</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 4. Planters -->
                <div class="image-card" id="card-4">
                    <img id="img-4" 
                         src="https://images.unsplash.com/photo-1485955900006-10f4d324d411?w=400&h=400&fit=crop" 
                         alt="Planters"
                         onerror="handleImageError(this, '4')">
                    <div class="title">Japanese Fiber Clay Planters</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 5. Garden Bench -->
                <div class="image-card" id="card-5">
                    <img id="img-5" 
                         src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=400&fit=crop" 
                         alt="Garden Bench"
                         onerror="handleImageError(this, '5')">
                    <div class="title">Teak Minimalist Bench</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 6. Travel Insurance -->
                <div class="image-card" id="card-6">
                    <img id="img-6" 
                         src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=400&h=400&fit=crop" 
                         alt="Travel Insurance"
                         onerror="handleImageError(this, '6')">
                    <div class="title">SafetyWing Insurance</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 7. Health Insurance -->
                <div class="image-card" id="card-7">
                    <img id="img-7" 
                         src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=400&h=400&fit=crop" 
                         alt="Health Insurance"
                         onerror="handleImageError(this, '7')">
                    <div class="title">Cigna Health Insurance</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 8. Baratza Grinder -->
                <div class="image-card" id="card-8">
                    <img id="img-8" 
                         src="https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400&h=400&fit=crop" 
                         alt="Coffee Grinder"
                         onerror="handleImageError(this, '8')">
                    <div class="title">Baratza Encore Grinder</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 9. Coffee Beans -->
                <div class="image-card" id="card-9">
                    <img id="img-9" 
                         src="https://images.unsplash.com/photo-1447933601403-0c6688de566e?w=400&h=400&fit=crop" 
                         alt="Coffee Beans"
                         onerror="handleImageError(this, '9')">
                    <div class="title">Trade Coffee Subscription</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                </div>

                <!-- 10. æµ‹è¯•åŸå§‹é—®é¢˜URL -->
                <div class="image-card" id="card-10">
                    <img id="img-10" 
                         src="https://images.unsplash.com/photo-1587301289919-6ec8f4c9e18a?w=400&h=400&fit=crop&q=80&auto=format&fm=jpg" 
                         alt="Original Problematic Image"
                         onerror="handleImageError(this, '10')">
                    <div class="title">åŸå§‹é—®é¢˜å›¾ç‰‡URL</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                    <div class="info">æµ‹è¯•åŸURL</div>
                </div>

                <!-- 11. Fellow Stagg EKG Electric Kettle -->
                <div class="image-card" id="card-11">
                    <img id="img-11" 
                         src="https://images.unsplash.com/photo-1563522522-26741bfb40e8?w=400&h=400&fit=crop&q=80&auto=format&fm=jpg" 
                         alt="Fellow Stagg EKG Electric Kettle"
                         onerror="handleImageError(this, '11')">
                    <div class="title">Fellow Stagg EKG Electric Kettle</div>
                    <div class="status loading">â³ åŠ è½½ä¸­...</div>
                    <div class="info">ç¬¬2ä¸ªæŠ¥é”™çš„å›¾ç‰‡</div>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="actions">
            <h3 style="margin-bottom: 20px; color: #333;">ä¸‹ä¸€æ­¥æ“ä½œ</h3>
            <button onclick="window.location.reload()" class="secondary">ğŸ”„ é‡æ–°æµ‹è¯•</button>
            <button onclick="window.location.href='article.html?id=5'" class="success">ğŸ“„ æŸ¥çœ‹å’–å•¡æ–‡ç« </button>
            <button onclick="window.location.href='fix-image-loading.html'">ğŸ”§ æ‰“å¼€è¯Šæ–­å·¥å…·</button>
        </div>
    </div>

    <script>
        let loadedCount = 0;
        let fallbackCount = 0;
        const totalImages = 11;

        function handleImageError(img, id) {
            fallbackCount++;
            updateStats();
            
            const card = document.getElementById('card-' + id);
            const statusEl = card.querySelector('.status');
            
            card.classList.add('error');
            statusEl.textContent = 'âš ï¸ ä½¿ç”¨å¤‡ç”¨å›¾ç‰‡';
            statusEl.className = 'status error';
            
            // è®¾ç½®å¤‡ç”¨å›¾ç‰‡
            const fallbackImages = {
                'baratza': 'https://via.placeholder.com/400x400/E8DDD3/8B4513?text=Coffee+Grinder',
                '1': 'https://via.placeholder.com/400x400/C8E6C9/2E7D32?text=Sustainable+Clothing',
                '2': 'https://via.placeholder.com/400x400/FFE0B2/E65100?text=Vitamin+C+Serum',
                '3': 'https://via.placeholder.com/400x400/E1F5FE/0277BD?text=Face+Cleanser',
                '4': 'https://via.placeholder.com/400x400/E8F5E9/2E7D32?text=Planters',
                '5': 'https://via.placeholder.com/400x400/F5F5F5/616161?text=Garden+Bench',
                '6': 'https://via.placeholder.com/400x400/E3F2FD/1976D2?text=Travel+Insurance',
                '7': 'https://via.placeholder.com/400x400/FFF3E0/E65100?text=Health+Insurance',
                '8': 'https://via.placeholder.com/400x400/E8DDD3/8B4513?text=Coffee+Grinder',
                '9': 'https://via.placeholder.com/400x400/D7CCC8/5D4037?text=Coffee+Beans',
                '10': 'https://via.placeholder.com/400x400/FFCCBC/BF360C?text=Original+URL',
                '11': 'https://via.placeholder.com/400x400/E8DDD3/8B4513?text=Electric+Kettle'
            };
            
            img.src = fallbackImages[id];
            img.onerror = null;
        }

        // ç›‘å¬æ‰€æœ‰å›¾ç‰‡åŠ è½½
        document.querySelectorAll('img[id^="img-"]').forEach(img => {
            img.addEventListener('load', function() {
                const id = this.id.replace('img-', '');
                const card = document.getElementById('card-' + id);
                const statusEl = card.querySelector('.status');
                
                if (!this.src.includes('placeholder')) {
                    loadedCount++;
                    card.classList.add('success');
                    statusEl.textContent = 'âœ… åŠ è½½æˆåŠŸ';
                    statusEl.className = 'status success';
                } else {
                    card.classList.add('error');
                    statusEl.textContent = 'âš ï¸ ä½¿ç”¨å¤‡ç”¨å›¾ç‰‡';
                    statusEl.className = 'status error';
                }
                
                updateStats();
            });
        });

        function updateStats() {
            const loaded = loadedCount;
            const fallback = fallbackCount;
            const total = totalImages;
            const completed = loaded + fallback;
            const successRate = total > 0 ? Math.round((loaded / total) * 100) : 0;
            
            document.getElementById('successCount').textContent = loaded;
            document.getElementById('fallbackCount').textContent = fallback;
            document.getElementById('successRate').textContent = successRate + '%';
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = (completed / total) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // æ›´æ–°æˆåŠŸç‡é¢œè‰²
            const rateEl = document.getElementById('successRate');
            if (successRate >= 80) {
                rateEl.className = 'value success';
            } else if (successRate >= 50) {
                rateEl.className = 'value pending';
            } else {
                rateEl.className = 'value error';
            }
            
            // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
            if (completed === total) {
                showFinalResult(loaded, fallback, successRate);
            }
        }

        function showFinalResult(loaded, fallback, rate) {
            const alertContainer = document.getElementById('alertContainer');
            
            if (rate === 0) {
                alertContainer.innerHTML = `
                    <div class="alert error">
                        <div class="icon">âŒ</div>
                        <div class="content">
                            <h3>æ— æ³•è®¿é—®Unsplash</h3>
                            <p><strong>æ‰€æœ‰å›¾ç‰‡éƒ½æ— æ³•åŠ è½½ï¼Œå·²å…¨éƒ¨ä½¿ç”¨å¤‡ç”¨å›¾ç‰‡ã€‚</strong></p>
                            <p style="margin-top: 10px;">è¿™è¡¨æ˜æ‚¨çš„ç½‘ç»œç¯å¢ƒæ— æ³•è®¿é—®UnsplashæœåŠ¡ã€‚å¯èƒ½åŸå› ï¼š</p>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>é˜²ç«å¢™æˆ–å…¬å¸ç½‘ç»œé˜»æ­¢</li>
                                <li>åœ°åŒºé™åˆ¶</li>
                                <li>éœ€è¦VPNæ‰èƒ½è®¿é—®</li>
                                <li>DNSè§£æé—®é¢˜</li>
                            </ul>
                            <p style="margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.05); border-radius: 8px;">
                                <strong>âœ… å¥½æ¶ˆæ¯ï¼š</strong> å¤‡ç”¨å›¾ç‰‡æœºåˆ¶æ­£å¸¸å·¥ä½œï¼æ‰€æœ‰äº§å“å›¾ç‰‡éƒ½æ˜¾ç¤ºäº†å ä½ç¬¦ã€‚<br>
                                è™½ç„¶ä¸æ˜¯åŸå§‹å›¾ç‰‡ï¼Œä½†è‡³å°‘æœ‰å›¾ç‰‡æ˜¾ç¤ºï¼Œä¸ä¼šå®Œå…¨ç©ºç™½ã€‚
                            </p>
                        </div>
                    </div>
                `;
            } else if (rate < 50) {
                alertContainer.innerHTML = `
                    <div class="alert warning">
                        <div class="icon">âš ï¸</div>
                        <div class="content">
                            <h3>Unsplashè®¿é—®ä¸ç¨³å®š</h3>
                            <p><strong>æˆåŠŸç‡ ${rate}%</strong> - éƒ¨åˆ†å›¾ç‰‡æ— æ³•åŠ è½½ã€‚</p>
                            <p style="margin-top: 10px;">è¿™è¡¨æ˜æ‚¨çš„ç½‘ç»œè¿æ¥åˆ°Unsplashä¸ç¨³å®šã€‚å»ºè®®ï¼š</p>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§</li>
                                <li>ç­‰å¾…å‡ åˆ†é’Ÿåé‡è¯•</li>
                                <li>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜</li>
                                <li>å°è¯•ä½¿ç”¨VPN</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (rate < 100) {
                alertContainer.innerHTML = `
                    <div class="alert warning">
                        <div class="icon">âš ï¸</div>
                        <div class="content">
                            <h3>å¤§éƒ¨åˆ†å›¾ç‰‡åŠ è½½æˆåŠŸ</h3>
                            <p><strong>æˆåŠŸç‡ ${rate}%</strong> - ${fallback}å¼ å›¾ç‰‡ä½¿ç”¨äº†å¤‡ç”¨å›¾ç‰‡ã€‚</p>
                            <p style="margin-top: 10px;">å¯èƒ½æ˜¯ä¸ªåˆ«å›¾ç‰‡çš„é—®é¢˜ï¼Œæˆ–ç½‘ç»œæ³¢åŠ¨ã€‚å¤‡ç”¨å›¾ç‰‡æœºåˆ¶å·²ç”Ÿæ•ˆã€‚</p>
                        </div>
                    </div>
                `;
            } else {
                alertContainer.innerHTML = `
                    <div class="alert success">
                        <div class="icon">âœ…</div>
                        <div class="content">
                            <h3>å®Œç¾ï¼æ‰€æœ‰å›¾ç‰‡åŠ è½½æˆåŠŸ</h3>
                            <p><strong>æˆåŠŸç‡ 100%</strong> - åŒ…æ‹¬ä¹‹å‰æŠ¥é”™çš„Baratzaå’–å•¡ç ”ç£¨æœºå›¾ç‰‡ï¼</p>
                            <p style="margin-top: 10px;">âœ… UnsplashæœåŠ¡æ­£å¸¸è®¿é—®</p>
                            <p>âœ… æ‰€æœ‰äº§å“å›¾ç‰‡éƒ½æ˜¾ç¤ºæ­£ç¡®</p>
                            <p>âœ… æ‚¨çš„ç½‘ç»œç¯å¢ƒå¯ä»¥æ­£å¸¸ä½¿ç”¨Unsplashå›¾ç‰‡</p>
                            <p style="margin-top: 15px; padding: 15px; background: rgba(76,175,80,0.1); border-radius: 8px;">
                                <strong>ğŸ‰ é—®é¢˜å·²è§£å†³ï¼</strong> å¯ä»¥æ­£å¸¸æŸ¥çœ‹æ–‡ç« äº†ã€‚
                            </p>
                        </div>
                    </div>
                `;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.addEventListener('load', function() {
            console.log('å¼€å§‹æµ‹è¯•å›¾ç‰‡åŠ è½½...');
            console.log('å¦‚æœæœ‰å›¾ç‰‡æ˜¾ç¤º"ä½¿ç”¨å¤‡ç”¨å›¾ç‰‡"ï¼Œè¯´æ˜æ— æ³•è®¿é—®Unsplash');
        });
    </script>
</body>
</html>

