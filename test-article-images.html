<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ç« å›¾ç‰‡æµ‹è¯• - Baratzaå’–å•¡ç ”ç£¨æœº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border-left: 4px solid #2196f3;
            border-radius: 4px;
        }
        .test-section h2 {
            color: #2196f3;
            margin-bottom: 15px;
        }
        .image-test {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .image-container {
            margin: 15px 0;
            text-align: center;
        }
        .image-container img {
            max-width: 400px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            margin: 10px 0;
        }
        .status.success {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .status.error {
            background: #ffebee;
            color: #c62828;
        }
        .status.loading {
            background: #fff3e0;
            color: #ef6c00;
        }
        .url-display {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
            margin: 10px 0;
        }
        button {
            padding: 10px 20px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #1976d2;
        }
        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¼ï¸ æ–‡ç« å›¾ç‰‡æµ‹è¯•</h1>
        <p style="color: #666; margin-bottom: 20px;">æµ‹è¯• Baratza Encore Conical Burr Grinder äº§å“å›¾ç‰‡</p>

        <div class="test-section">
            <h2>æµ‹è¯•1: ç›´æ¥åŠ è½½äº§å“å›¾ç‰‡</h2>
            <div class="info-box">
                <strong>å›¾ç‰‡URL:</strong>
                <div class="url-display" id="imageUrl">https://images.unsplash.com/photo-1587301289919-6ec8f4c9e18a?w=400&h=400&fit=crop</div>
            </div>
            
            <div class="image-test">
                <h3>åŸå§‹URLæµ‹è¯•</h3>
                <div class="image-container">
                    <img id="testImage1" src="" alt="Coffee grinder" style="display: none;">
                    <div id="status1" class="status loading">ç­‰å¾…åŠ è½½...</div>
                </div>
            </div>

            <div class="image-test">
                <h3>ä¼˜åŒ–URLæµ‹è¯•ï¼ˆæ·»åŠ auto=formatï¼‰</h3>
                <div class="image-container">
                    <img id="testImage2" src="" alt="Coffee grinder" style="display: none;">
                    <div id="status2" class="status loading">ç­‰å¾…åŠ è½½...</div>
                </div>
                <div class="url-display" id="optimizedUrl"></div>
            </div>

            <button onclick="testImages()">ğŸ”„ å¼€å§‹æµ‹è¯•å›¾ç‰‡</button>
        </div>

        <div class="test-section">
            <h2>æµ‹è¯•2: æŸ¥çœ‹å’–å•¡æ–‡ç« å®Œæ•´æ•°æ®</h2>
            <button onclick="showArticleData()">ğŸ“„ æ˜¾ç¤ºæ–‡ç« æ•°æ®</button>
            <div id="articleDataDisplay"></div>
        </div>

        <div class="test-section">
            <h2>æµ‹è¯•3: åœ¨æ–‡ç« é¡µé¢ä¸­æ‰“å¼€</h2>
            <div class="info-box">
                <strong>å’–å•¡æ–‡ç«  (ID 5):</strong> Specialty Coffee at Home
                <br><br>
                <a href="article.html?id=5" target="_blank" style="display: inline-block; padding: 10px 20px; background: #4caf50; color: white; text-decoration: none; border-radius: 4px;">
                    æ‰“å¼€å’–å•¡æ–‡ç« æŸ¥çœ‹äº§å“å›¾ç‰‡
                </a>
            </div>
            <p style="margin-top: 15px; color: #666;">
                åœ¨æ–‡ç« ä¸­æ‰¾åˆ° "Featured Product: Baratza Encore Conical Burr Grinder" éƒ¨åˆ†ï¼Œæ£€æŸ¥å›¾ç‰‡æ˜¯å¦æ˜¾ç¤ºã€‚
            </p>
        </div>

        <div class="test-section">
            <h2>æµ‹è¯•4: æ£€æŸ¥æ‰€æœ‰äº§å“å›¾ç‰‡</h2>
            <button onclick="checkAllProductImages()">ğŸ” æ£€æŸ¥æ‰€æœ‰äº§å“å›¾ç‰‡</button>
            <div id="allImagesDisplay"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“ é—®é¢˜æ’æŸ¥æ¸…å•</h2>
            <div style="background: white; padding: 15px; border-radius: 4px;">
                <h3 style="margin-bottom: 10px;">å¦‚æœå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥ï¼š</h3>
                <ul style="line-height: 1.8; padding-left: 20px;">
                    <li>âœ… ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸</li>
                    <li>âœ… UnsplashæœåŠ¡æ˜¯å¦å¯è®¿é—®</li>
                    <li>âœ… æµè§ˆå™¨æ˜¯å¦é˜»æ­¢äº†å›¾ç‰‡åŠ è½½</li>
                    <li>âœ… æ˜¯å¦æœ‰å¹¿å‘Šæ‹¦æˆªæ’ä»¶å¹²æ‰°</li>
                    <li>âœ… å›¾ç‰‡URLæ˜¯å¦æ­£ç¡®</li>
                    <li>âœ… æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ï¼ˆæŒ‰F12æŸ¥çœ‹ï¼‰</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ å¿«é€Ÿä¿®å¤æ–¹æ³•</h2>
            <div style="background: white; padding: 15px; border-radius: 4px;">
                <h3 style="margin-bottom: 10px;">æ–¹æ³•1: æ¸…é™¤ç¼“å­˜</h3>
                <p>æŒ‰ <code>Ctrl+Shift+Delete</code> æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œç„¶ååˆ·æ–°é¡µé¢ã€‚</p>
                
                <h3 style="margin: 15px 0 10px;">æ–¹æ³•2: å¼ºåˆ¶åˆ·æ–°</h3>
                <p>åœ¨æ–‡ç« é¡µé¢æŒ‰ <code>Ctrl+F5</code> å¼ºåˆ¶åˆ·æ–°ã€‚</p>
                
                <h3 style="margin: 15px 0 10px;">æ–¹æ³•3: æ£€æŸ¥ç½‘ç»œ</h3>
                <p>ç¡®ä¿å¯ä»¥è®¿é—® <code>images.unsplash.com</code></p>
            </div>
        </div>
    </div>

    <script src="js/articles-data.js"></script>
    <script>
        const imageUrl = 'https://images.unsplash.com/photo-1587301289919-6ec8f4c9e18a?w=400&h=400&fit=crop';
        const optimizedUrl = 'https://images.unsplash.com/photo-1587301289919-6ec8f4c9e18a?w=400&h=400&fit=crop&q=80&auto=format';

        document.getElementById('imageUrl').textContent = imageUrl;
        document.getElementById('optimizedUrl').textContent = optimizedUrl;

        function testImages() {
            testImage('testImage1', 'status1', imageUrl, 'åŸå§‹URL');
            testImage('testImage2', 'status2', optimizedUrl, 'ä¼˜åŒ–URL');
        }

        function testImage(imgId, statusId, url, label) {
            const img = document.getElementById(imgId);
            const status = document.getElementById(statusId);
            
            status.className = 'status loading';
            status.textContent = 'â³ åŠ è½½ä¸­...';
            img.style.display = 'none';

            const testImg = new Image();
            const startTime = performance.now();

            testImg.onload = function() {
                const loadTime = Math.round(performance.now() - startTime);
                status.className = 'status success';
                status.textContent = `âœ… æˆåŠŸï¼åŠ è½½æ—¶é—´: ${loadTime}ms`;
                img.src = url;
                img.style.display = 'block';
                console.log(`${label} åŠ è½½æˆåŠŸ:`, url);
            };

            testImg.onerror = function() {
                status.className = 'status error';
                status.textContent = 'âŒ åŠ è½½å¤±è´¥ï¼';
                console.error(`${label} åŠ è½½å¤±è´¥:`, url);
            };

            testImg.src = url;
        }

        function showArticleData() {
            const article = articlesData.find(a => a.id === 5);
            if (!article) {
                alert('æœªæ‰¾åˆ°å’–å•¡æ–‡ç« æ•°æ®ï¼');
                return;
            }

            const container = document.getElementById('articleDataDisplay');
            
            // æå–æ–‡ç« å†…å®¹ä¸­çš„æ‰€æœ‰å›¾ç‰‡
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = article.content;
            const images = tempDiv.querySelectorAll('img');
            
            container.innerHTML = `
                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 4px;">
                    <h3>æ–‡ç« ä¿¡æ¯:</h3>
                    <p><strong>ID:</strong> ${article.id}</p>
                    <p><strong>æ ‡é¢˜:</strong> ${article.title}</p>
                    <p><strong>åˆ†ç±»:</strong> ${article.categoryName}</p>
                    <p><strong>ä½œè€…:</strong> ${article.author}</p>
                    <br>
                    <h3>æ–‡ç« ä¸­çš„å›¾ç‰‡ (${images.length}å¼ ):</h3>
                    <ol style="line-height: 1.8;">
                        ${Array.from(images).map((img, index) => `
                            <li>
                                <strong>${img.alt || 'æ— æè¿°'}</strong>
                                <br><code style="font-size: 11px;">${img.src}</code>
                                <br><span style="color: ${img.src.includes('photo-1587301289919') ? '#4caf50' : '#666'};">
                                    ${img.src.includes('photo-1587301289919') ? 'ğŸ‘‰ è¿™æ˜¯ Baratza ç ”ç£¨æœºå›¾ç‰‡' : ''}
                                </span>
                            </li>
                        `).join('')}
                    </ol>
                </div>
            `;
        }

        function checkAllProductImages() {
            const allImages = [];
            
            articlesData.forEach(article => {
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = article.content;
                const productCards = tempDiv.querySelectorAll('.product-card');
                
                productCards.forEach(card => {
                    const img = card.querySelector('img');
                    const title = card.querySelector('h3');
                    if (img && title) {
                        allImages.push({
                            article: article.title,
                            product: title.textContent,
                            url: img.src,
                            alt: img.alt
                        });
                    }
                });
            });

            const container = document.getElementById('allImagesDisplay');
            container.innerHTML = `
                <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 4px;">
                    <h3>æ‰¾åˆ° ${allImages.length} ä¸ªäº§å“å›¾ç‰‡:</h3>
                    <div style="margin-top: 15px;">
                        ${allImages.map((item, index) => `
                            <div style="margin: 15px 0; padding: 15px; border: 1px solid #ddd; border-radius: 4px;">
                                <h4 style="color: #2196f3;">${index + 1}. ${item.product}</h4>
                                <p><strong>æ–‡ç« :</strong> ${item.article}</p>
                                <p><strong>Alt:</strong> ${item.alt}</p>
                                <p><strong>URL:</strong> <code style="font-size: 11px;">${item.url}</code></p>
                                <div style="margin-top: 10px; text-align: center;">
                                    <img src="${item.url}" alt="${item.alt}" style="max-width: 200px; border: 1px solid #ddd; border-radius: 4px;" 
                                         onload="this.nextElementSibling.textContent = 'âœ… åŠ è½½æˆåŠŸ'"
                                         onerror="this.nextElementSibling.textContent = 'âŒ åŠ è½½å¤±è´¥'; this.nextElementSibling.style.color = 'red'">
                                    <div style="margin-top: 5px; font-size: 14px;">â³ åŠ è½½ä¸­...</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', () => {
            console.log('é¡µé¢å·²åŠ è½½ï¼Œå‡†å¤‡æµ‹è¯•å›¾ç‰‡');
            console.log('Baratza å›¾ç‰‡URL:', imageUrl);
            
            // 3ç§’åè‡ªåŠ¨å¼€å§‹æµ‹è¯•
            setTimeout(() => {
                console.log('è‡ªåŠ¨å¼€å§‹æµ‹è¯•...');
                testImages();
            }, 1000);
        });
    </script>
</body>
</html>

